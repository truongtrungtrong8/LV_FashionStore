@page "/Sanpham/Index"
@using Blazored.Modal.Services
@using Model
@using Model.DataDB
@using Web_Admin_Client.Services
@inject IJSRuntime JS
@layout MainLayout
@using System.Globalization
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage
@inject NavigationManager NavigationManager;



        <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <h3 class="page-title"> Quản lý </h3>
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <button @onclick="Create_SP" class="btn btn-block btn-lg btn-gradient-primary mt-4 mdi mdi-playlist-plus"> Thêm sản phẩm mới</button>
                </ol>
              </nav>
            </div>
            <div class="row">

              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title"></h4>
                    <p class="card-description"> Add class <code>.table-bordered</code>
                    </p>
                    <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Chỉnh sửa</th>
                                    <th>Ảnh mô tả</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Giá</th>
                                </tr>
                             </thead>
                            <tbody>
                                    @foreach (var item in sanpham)
                                    {
                                    <tr>
                                        <td>
                                            <a class="nav-link dropdown-toggle" id="profileDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
                                            </a>
                                            <div class="dropdown-menu navbar-dropdown" aria-labelledby="profileDropdown">
                                                <a class="dropdown-item" href="/Sanpham/Edit/@item.MaSp">
                                                    <i class="mdi mdi-tooltip-edit me-2 text-success"></i> Chỉnh sửa
                                                </a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" href="#">
                                                    <i class="mdi mdi-playlist-remove me-2 text-danger"></i> Xóa
                                                </a>
                                            </div>
                                        </td>
                                        <td class="py-1">
                                            <img src="img/product/sale/@item.HaBia" alt="image" />
                                        </td>
                                        <td> @item.TenSp </td>
                                        <td>
                                                @sanphamservice.FormatVND(item.GiaSp) VND
                                        </td>

                                    </tr>
                                    }


                            </tbody>
                    </table>
                  </div>
                </div>
              </div>

            </div>
          </div>
          </div>









@code {
    List<Sanpham_Model> sanpham = new List<Sanpham_Model>();


    SanphamService sanphamservice = new SanphamService();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            sanpham = await sanphamservice.GetAllProduct();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }

    }
    public void Create_SP()
    {
        NavigationManager.NavigateTo("/Sanpham/Create");
    }
    //[CascadingParameter] public IModalService Modal { get; set; }

    //public async Task Edit(string id)
    //{
    //    try
    //    {
    //        Modal.Show<Edit>("Chỉnh sửa thông tin");

    //    }
    //    catch (Exception ex)
    //    {
    //        Console.WriteLine(ex);
    //    }
    //}
}
